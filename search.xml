<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>（最新+详细+Pycharm远程调试GUI程序）解决qt.qpa.xcb:could not connect to display问题</title>
    <url>/%E8%BF%9C%E7%A8%8Bgui/</url>
    <content><![CDATA[<h1 id="出现原因"><a href="#出现原因" class="headerlink" title="出现原因"></a>出现原因</h1><p>在ubuntu服务器上运行cv.imshow()方法时就会报以下错误</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qt.qpa.xcb: could not connect to display</span><br><span class="line">qt.qpa.plugin: Could not load the Qt platform plugin <span class="string">&quot;xcb&quot;</span> <span class="keyword">in</span> <span class="string">&quot;/root/anaconda3/lib/python3.8/site-packages/cv2/qt/plugins&quot;</span> even though it was found.</span><br><span class="line">This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.</span><br><span class="line"></span><br><span class="line">Available platform plugins are: xcb, eglfs, minimal, minimalegl, offscreen, vnc</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>因为用的是云服务器，我也不能去他那里外接个显示器，而且我也是没有装图形化界面的，如果有图形化界面可以使用vnc连接就解决了，我不想装图形化界面就打算使用MobaXTerm来使远程服务器的显示内容显示到本地windows上。</p>
<h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><h2 id="下载MobaXTerm"><a href="#下载MobaXTerm" class="headerlink" title="下载MobaXTerm"></a>下载MobaXTerm</h2><p>MobaXTerm内置了X server，在服务器上的图形化应用可以在本地轻松展示。<a href="https://mobaxterm.mobatek.net/download-home-edition.html">MobaXTerm下载地址</a><br>这里我们下载Portable版本这个免安装，下载下来就一个exe文件。</p>
<h2 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h2><p>打开下载的MobaXTerm，右上角Session-&gt;SSH，Remote host输入服务器地址，勾选Specify username输入连接的用户名，Port输入端口号，然后在下面Advanced Settings高级设置那里勾选X11-forwarding，就是需要X11-forwarding去转发服务器显示内容。<br><img src="/%E8%BF%9C%E7%A8%8Bgui/bc5082da42fc49c1a6598ea16f0bdcda-1683797861418-7.png" alt="连接服务器"></p>
<h2 id="安装Xorg和打开X11-forwarding"><a href="#安装Xorg和打开X11-forwarding" class="headerlink" title="安装Xorg和打开X11-forwarding"></a>安装Xorg和打开X11-forwarding</h2><p>连接好服务器后可以发现我们的X11-forwarding服务是没有打开的<br><img src="/%E8%BF%9C%E7%A8%8Bgui/8dad3a8f3e974c0c9d8a133e51306460.png" alt="X11-forwarding"><br>首先我们先安装Xorg，Xorg是X11的实现，负责连接到Xserver进行输入和输出。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install xorg</span><br></pre></td></tr></table></figure>

<p>然后我们打开X11-forwarding服务，在命令行输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p>修改两个配置项</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">X11Forwarding <span class="built_in">yes</span></span><br><span class="line">X11UseLocalhost no</span><br></pre></td></tr></table></figure>
<p>之后重启ssh服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service ssh restart</span><br></pre></td></tr></table></figure>
<p>重新连接服务器后可以发现支持X11-forwarding了<br><img src="/%E8%BF%9C%E7%A8%8Bgui/98642e99adf84ebc978a5b6eae72bd22.png" alt="支持x11"><br>在命令行输入xclock测试能否传输GUI界面到本地</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xclock</span><br></pre></td></tr></table></figure>
<p><img src="/%E8%BF%9C%E7%A8%8Bgui/459ac778e244442ea74330023af8731a.png" alt="xclock"><br><em><strong>成功！</strong></em></p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>如何在Pycharm上面远程调试GUI程序呢？</p>
<h2 id="设置共享目录"><a href="#设置共享目录" class="headerlink" title="设置共享目录"></a>设置共享目录</h2><p>可参考这篇文章<br><a href="https://www.autodl.com/docs/pycharm/">PyCharm远程开发</a></p>
<h2 id="修改环境"><a href="#修改环境" class="headerlink" title="修改环境"></a>修改环境</h2><p>在设置好远程开发后修改环境信息<br>在PyCharm中打开Run-&gt;Edit Configurations，当然也可以在右上角运行按钮旁边直接点。然后在Environment variables添加DISPLAY变量。<br><img src="/%E8%BF%9C%E7%A8%8Bgui/93a90ddd192648bdafab4cbc24442de6.png" alt="修改环境"></p>
<p>变量值是从服务器获取的。在命令行输入echo $DISPLAY就行。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$DISPLAY</span></span><br></pre></td></tr></table></figure>
<p><img src="/%E8%BF%9C%E7%A8%8Bgui/9ff8e22ecb2c41ba8a1f40b2707b4965.png" alt="在这里插入图片描述"></p>
]]></content>
      <categories>
        <category>辣么多的BUG</category>
      </categories>
      <tags>
        <tag>GUI</tag>
      </tags>
  </entry>
</search>
